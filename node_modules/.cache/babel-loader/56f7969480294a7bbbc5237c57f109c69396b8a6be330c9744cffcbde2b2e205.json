{"ast":null,"code":"import React,{useEffect,useState}from'react';import{db,storage}from'../firebase';import{collection,query,where,getDocs}from'firebase/firestore';import{ref,getDownloadURL}from'firebase/storage';import'./styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Research=_ref=>{let{selectedUniversity}=_ref;const[posts,setPosts]=useState([]);const[currentIndex,setCurrentIndex]=useState(0);useEffect(()=>{const fetchPosts=async()=>{try{const q=query(collection(db,'Post'),where('college','==',selectedUniversity),where('Field.field','==','研究系'));const querySnapshot=await getDocs(q);const fetchedPosts=[];await Promise.all(querySnapshot.docs.map(async doc=>{const postData=doc.data();const imageRef=ref(storage,\"images/\".concat(postData.userID,\"/\").concat(postData.Field.Content.imageRandomId));const imageUrl=await getDownloadURL(imageRef);postData.imageUrl=imageUrl;fetchedPosts.push({id:doc.id,...postData});}));setPosts(fetchedPosts);}catch(error){console.error('投稿の取得エラー:',error.message);}};fetchPosts();},[selectedUniversity]);const nextPosts=()=>{if(currentIndex+4<posts.length){setCurrentIndex(currentIndex+4);}};const prevPosts=()=>{if(currentIndex-4>=0){setCurrentIndex(currentIndex-4);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:posts.slice(currentIndex,currentIndex+2).map(post=>/*#__PURE__*/_jsx(\"div\",{className:\"postContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"postContent\",children:[post.imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:post.imageUrl,className:\"image\",alt:\"Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"textContainer\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u30E6\\u30FC\\u30B6\\u30FC\\u540D: \",post.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6295\\u7A3F\\u5185\\u5BB9: \",post.Field.Content.contents]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6D3B\\u52D5\\u5834\\u6240: \",post.Field.Content.actplace]})]})]})},post.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:posts.slice(currentIndex+2,currentIndex+4).map(post=>/*#__PURE__*/_jsx(\"div\",{className:\"postContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"postContent\",children:[post.imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:post.imageUrl,className:\"image\",alt:\"Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"textContainer\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u30E6\\u30FC\\u30B6\\u30FC\\u540D: \",post.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6295\\u7A3F\\u5185\\u5BB9: \",post.Field.Content.contents]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6D3B\\u52D5\\u5834\\u6240: \",post.Field.Content.actplace]})]})]})},post.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonContainer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:prevPosts,className:\"button\",children:\"\\u524D\\u3078\"}),/*#__PURE__*/_jsx(\"button\",{onClick:nextPosts,className:\"button\",children:\"\\u6B21\\u3078\"})]})]});};export default Research;","map":{"version":3,"names":["React","useEffect","useState","db","storage","collection","query","where","getDocs","ref","getDownloadURL","jsx","_jsx","jsxs","_jsxs","Research","_ref","selectedUniversity","posts","setPosts","currentIndex","setCurrentIndex","fetchPosts","q","querySnapshot","fetchedPosts","Promise","all","docs","map","doc","postData","data","imageRef","concat","userID","Field","Content","imageRandomId","imageUrl","push","id","error","console","message","nextPosts","length","prevPosts","className","children","slice","post","src","alt","username","contents","actplace","onClick"],"sources":["/Users/okataichi/Desktop/SakuruSite/src/components/Research.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { db, storage } from '../firebase';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { ref, getDownloadURL } from 'firebase/storage';\nimport './styles.css';\n\nconst Research = ({ selectedUniversity }) => {\n  const [posts, setPosts] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const q = query(\n          collection(db, 'Post'),\n          where('college', '==', selectedUniversity),\n          where('Field.field', '==', '研究系')\n        );\n        const querySnapshot = await getDocs(q);\n        const fetchedPosts = [];\n\n        await Promise.all(\n          querySnapshot.docs.map(async (doc) => {\n            const postData = doc.data();\n            const imageRef = ref(storage, `images/${postData.userID}/${postData.Field.Content.imageRandomId}`);\n            const imageUrl = await getDownloadURL(imageRef);\n            postData.imageUrl = imageUrl;\n            fetchedPosts.push({ id: doc.id, ...postData });\n          })\n        );\n\n        setPosts(fetchedPosts);\n      } catch (error) {\n        console.error('投稿の取得エラー:', error.message);\n      }\n    };\n\n    fetchPosts();\n  }, [selectedUniversity]);\n\n  const nextPosts = () => {\n    if (currentIndex + 4 < posts.length) {\n      setCurrentIndex(currentIndex + 4);\n    }\n  };\n\n  const prevPosts = () => {\n    if (currentIndex - 4 >= 0) {\n      setCurrentIndex(currentIndex - 4);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        {posts.slice(currentIndex, currentIndex + 2).map((post) => (\n          <div key={post.id} className=\"postContainer\">\n            <div className=\"postContent\">\n              {post.imageUrl && <img src={post.imageUrl} className=\"image\" alt=\"Post\" />}\n              <div className=\"textContainer\">\n                <p>ユーザー名: {post.username}</p>\n                <p>投稿内容: {post.Field.Content.contents}</p>\n                <p>活動場所: {post.Field.Content.actplace}</p>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className=\"row\">\n        {posts.slice(currentIndex + 2, currentIndex + 4).map((post) => (\n          <div key={post.id} className=\"postContainer\">\n            <div className=\"postContent\">\n              {post.imageUrl && <img src={post.imageUrl} className=\"image\" alt=\"Post\" />}\n              <div className=\"textContainer\">\n                <p>ユーザー名: {post.username}</p>\n                <p>投稿内容: {post.Field.Content.contents}</p>\n                <p>活動場所: {post.Field.Content.actplace}</p>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className=\"buttonContainer\">\n        <button onClick={prevPosts} className=\"button\">前へ</button>\n        <button onClick={nextPosts} className=\"button\">次へ</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Research;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}