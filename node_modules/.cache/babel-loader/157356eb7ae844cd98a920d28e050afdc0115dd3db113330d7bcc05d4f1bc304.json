{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{signInWithEmailAndPassword}from'firebase/auth';import{auth,db}from'../firebase';import{collection,getDocs,query,where}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const goToRegistration=()=>{navigate('SakuruSite/registration');};const handleLogin=async()=>{try{const userCredential=await signInWithEmailAndPassword(auth,email,password);const user=userCredential.user;// ユーザーのデータを取得\nconst userData=await getUserData(user.uid);// ログイン後にユーザーのデータとともにPostコンポーネントに移動\nnavigate('SakuruSite/post',{state:{userData}});}catch(error){// Handle login errors\nalert('Login Error: '+error.message);}};// Firestoreからユーザーのデータを取得する関数\nconst getUserData=async userId=>{try{const userQuery=query(collection(db,'User'),where('UserID','==',userId));const querySnapshot=await getDocs(userQuery);const userData=[];querySnapshot.forEach(doc=>{userData.push({id:doc.id,...doc.data()});});return userData[0];// 複数のドキュメントが見つかった場合、最初のものを返す\n}catch(error){console.error('Error getting user data:',error.message);return null;}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'10%'},children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u30ED\\u30B0\\u30A4\\u30F3\\u753B\\u9762\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:'1%'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),style:{borderWidth:1,borderRadius:5,width:'30%'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1%'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),style:{borderWidth:1,borderRadius:5,width:'30%'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'2%',width:'15%',marginLeft:'45%'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,style:{borderWidth:1,borderRadius:10,backgroundColor:'#C1191A',color:'white'},children:\"\\u30ED\\u30B0\\u30A4\\u30F3\"}),/*#__PURE__*/_jsx(\"button\",{onClick:goToRegistration,style:{borderWidth:1,borderRadius:10,backgroundColor:'#C1191A',color:'white',marginTop:'3%',marginLeft:'25%'},children:\"\\u65B0\\u898F\\u767B\\u9332\"})]})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","signInWithEmailAndPassword","auth","db","collection","getDocs","query","where","jsx","_jsx","jsxs","_jsxs","Login","navigate","email","setEmail","password","setPassword","goToRegistration","handleLogin","userCredential","user","userData","getUserData","uid","state","error","alert","message","userId","userQuery","querySnapshot","forEach","doc","push","id","data","console","children","style","textAlign","marginTop","type","placeholder","value","onChange","e","target","borderWidth","borderRadius","width","marginLeft","onClick","backgroundColor","color"],"sources":["/Users/okataichi/Desktop/SakuruSite/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth, db } from '../firebase';\nimport { collection, getDocs, query, where } from 'firebase/firestore';\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const goToRegistration = () => {\n    navigate('SakuruSite/registration');\n  };\n\n  const handleLogin = async () => {\n    try {\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n\n      // ユーザーのデータを取得\n      const userData = await getUserData(user.uid);\n\n      // ログイン後にユーザーのデータとともにPostコンポーネントに移動\n      navigate('SakuruSite/post', { state: { userData } });\n    } catch (error) {\n      // Handle login errors\n      alert('Login Error: ' + error.message);\n    }\n  };\n\n  // Firestoreからユーザーのデータを取得する関数\n  const getUserData = async (userId) => {\n    try {\n      const userQuery = query(collection(db, 'User'), where('UserID', '==', userId));\n      const querySnapshot = await getDocs(userQuery);\n      const userData = [];\n      querySnapshot.forEach((doc) => {\n        userData.push({ id: doc.id, ...doc.data() });\n      });\n      return userData[0]; // 複数のドキュメントが見つかった場合、最初のものを返す\n    } catch (error) {\n      console.error('Error getting user data:', error.message);\n      return null;\n    }\n  };\n\n  return (\n    <div>\n      <div style={{ textAlign: 'center', marginTop: '10%' }}>\n        <h2>ログイン画面</h2>\n      </div>\n      <div style={{ textAlign: 'center', marginTop: '1%' }}>\n        <div>\n          <label>メールアドレス</label>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            style={{ borderWidth: 1, borderRadius: 5, width: '30%' }}\n          />\n        </div>\n        <div style={{ marginTop: '1%' }}>\n          <label>パスワード</label>\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            style={{ borderWidth: 1, borderRadius: 5, width: '30%' }}\n          />\n        </div>\n        <div style={{ marginTop: '2%', width: '15%', marginLeft:'45%' }}>\n          <button onClick={handleLogin} style={{ borderWidth: 1, borderRadius: 10, backgroundColor: '#C1191A', color: 'white' }}>\n            ログイン\n          </button>\n          <button onClick={goToRegistration} style={{ borderWidth: 1, borderRadius: 10, backgroundColor: '#C1191A', color: 'white', marginTop: '3%', marginLeft: '25%' }}>\n            新規登録\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}